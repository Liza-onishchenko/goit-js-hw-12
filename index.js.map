{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL ='https://pixabay.com/api/';\nconst API_KEY = '45541862-830ec78a7fc3c846a462bfeb1';\n\nexport const fetchPhotos = async (searchedQuery, page) => { \n    const axiosOptions = {\n     params:{\n       key: API_KEY,\n       q: searchedQuery,\n       image_type: 'photo',\n       orientation: 'horizontal',\n       safesearch: 'true',\n       page: page,\n       per_page: 15,\n    },\n  };\n    return axios.get(`${BASE_URL}`, axiosOptions);\n };","\nexport const createGalleryCardTemplate = imgInfo => {\n    return `\n    <li class=\"gallery-card\">\n      <a href=\"${imgInfo.largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n      </a> \n      <ul>\n        <li>likes: ${imgInfo.likes}</li>\n        <li>views: ${imgInfo.views}</li>\n        <li>comments: ${imgInfo.comments}</li>\n        <li>downloads: ${imgInfo.downloads}</li>\n      </ul>\n    </li>\n    `;\n};\n\nexport const displayPhotos = (photos, galleryEl, modal) => {\n    const galleryMarkup = photos.map(createGalleryCardTemplate).join('');\n    galleryEl.innerHTML = galleryMarkup;\n    modal.refresh();\n};\n\n\n\nexport const showLoadingIndicator = (indicatorEl) => {\n    document.querySelector('.loader').classList.remove('is-hidden');\n    // indicatorEl.classList.remove('is-hidden');\n};\n\nexport const hideLoadingIndicator = (indicatorEl) => {\n  document.querySelector('.loader').classList.add('is-hidden');\n    // indicatorEl.classList.add('is-hidden');\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\n\n\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport { createGalleryCardTemplate } from \"./js/render-functions\";\nimport { displayPhotos } from \"./js/render-functions\";\nimport { showLoadingIndicator } from \"./js/render-functions\";\nimport { hideLoadingIndicator } from \"./js/render-functions\";\n\n\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadingIndicatorEl = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.gallery-card a');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\n\nlet currentPage = 1;\nconst itemPerPage = 15;\nlet searchValue = '';\n\n\nconst onSearchFormSubmit = async event => {\n  try{\n      \n    event.preventDefault();\n\n     searchValue = searchFormEl.elements.user_query.value.trim();   //  oчищення галереї ініціалізація змін\n\n     currentPage = 1; //  обнуляє номер групи\n\n     galleryEl.innerHTML = ''; // Очистка галереї\n\n     loadMoreBtnEl.classList.add('is-hidden');\n\n     if(searchValue === \"\") {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n        });\n        \n        return;\n      }\n\n      showLoadingIndicator(loadingIndicatorEl);//індикатор завантаження\n\n      \n      const response = await fetchPhotos(searchValue, currentPage, itemPerPage);//Запит до АРІ   \n\n      \n      if (response.data.hits.length === 0) {\n            iziToast.warning({\n                title: \"No results\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n            });\n           \n            return;\n        }\n\n        \n      displayPhotos(response.data.hits, galleryEl, lightbox);// Відображення результату\n\n       \n      loadMoreBtnEl.classList.remove('is-hidden');  //Показати кнопку load more\n\n    } catch (err) {\n       iziToast.error({\n        title: \"Error\",\n        message: \"Something went wrong! Please try again later.\",\n        position: 'topRight',\n        });\n      console.error(\"Error fetching images:\", err);\n      \n    }  finally {\n\n      hideLoadingIndicator(loadingIndicatorEl); //Сховати індикатор завантаження\n\n      searchFormEl.elements.user_query.value = '';\n    } \n   \n};\n\nconst onLoadMoreBtnClick = async event => { \n    try {\n      \n      showLoadingIndicator(loadingIndicatorEl); //показує індикатор під кнопкою\n\n      currentPage ++;  //Номер групи\n\n      const response = await fetchPhotos(searchValue, currentPage, itemPerPage);//запит на сервер за наступною групою\n\n      galleryEl.insertAdjacentHTML('beforeend', response.data.hits.map(createGalleryCardTemplate).join(''));// //Відмальовую нові зображення\n      lightbox.refresh(); //оновлення після додавання нових зображень\n      searchFormEl.reset();\n\n      \n      const totalPages = Math.ceil(response.data.totalHits / itemPerPage);//обчислення стр  кількість\n      if (currentPage >= totalPages) {          //якщо кінець колекціі  \n        loadMoreBtnEl.classList.add('is-hidden'); //хова кнопку\n         iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results\",\n            position: 'topRight',\n        });\n      }\n\n      smoothScroll();\n\n    } catch(err) {\n        console.log(err);\n    } finally {\n        hideLoadingIndicator(loadingIndicatorEl);  //Приховує індикатор завантаження\n    }\n};\n\n\nconst smoothScroll = () => {\n    const { height } = galleryEl.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  };\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["BASE_URL","API_KEY","fetchPhotos","searchedQuery","page","axiosOptions","axios","createGalleryCardTemplate","imgInfo","displayPhotos","photos","galleryEl","modal","galleryMarkup","showLoadingIndicator","indicatorEl","hideLoadingIndicator","searchFormEl","loadingIndicatorEl","lightbox","SimpleLightbox","loadMoreBtnEl","currentPage","itemPerPage","searchValue","onSearchFormSubmit","event","iziToast","response","err","onLoadMoreBtnClick","totalPages","smoothScroll","height"],"mappings":"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"}